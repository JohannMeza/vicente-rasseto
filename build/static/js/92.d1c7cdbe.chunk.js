"use strict";(self.webpackChunksistema_web=self.webpackChunksistema_web||[]).push([[92,502,854],{3092:function(e,n,t){t.r(n);var r=t(2791),i=t(6871),a=t(2051),s=t(7854),o=t(184),c=function(){return(0,o.jsxs)(i.Z5,{children:[(0,o.jsx)(i.AW,{path:"/admin",element:(0,o.jsx)(a.default,{})}),(0,o.jsx)(i.AW,{path:"/:id",element:(0,o.jsx)(s.default,{})})]})};n.default=(0,r.memo)(c)},2051:function(e,n,t){t.r(n),t.d(n,{default:function(){return S}});var r=t(9439),i=t(1413),a=t(8870),s=t(3767),o=t(1889),c=t(9836),l=t(6890),u=t(5855),d=t(3994),x=t(3382),h=t(2791),f=t(9412),Z=t(5760),m=t(6249),p=t(6206),j=t(9969),E=t(6871),g=t(3943),I=t(4092),b=t(7535),v=t(4634),_=t(589),C=t(8012),N=t(184),R={rowsPerPage:10,page:0,count:0},P={NOMBRE_PERFIL:"",IS_MANAGEABLE:!0,ESTADO:!0},A={NOMBRE_PERFIL:null,ESTADO:!0},y=[{label:"Activo",value:!0},{label:"Inactivo",value:!1}];function S(){var e=(0,_.Z)(),n=(0,h.useState)([]),t=(0,r.Z)(n,2),S=t[0],O=t[1],B=(0,h.useState)(R),F=(0,r.Z)(B,2),k=F[0],D=F[1],M=(0,h.useState)(!1),T=(0,r.Z)(M,2),L=T[0],U=T[1],G=(0,p.Q)(P,!0),w=G.data,V=G.setData,W=G.errors,q=G.setErrors,H=G.handleInputFormChange,z=G.resetForm,K=(0,g.c)(A),Q=(0,r.Z)(K,3),X=Q[0],J=Q[1],Y=Q[2],$=(0,E.s0)(),ee=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e(!0),(0,m.a)({path:j.B3.SEGURIDAD.PERFILES.INDEX,body:X,fnRequest:b.yA,pagination:!0,rowsPerPage:n,page:t,success:function(n){var t=n.rowsPerPage,r=n.count,i=n.page;--i,D({rowsPerPage:t,count:r,page:i}),O(n.data),e(!1)},error:function(n){e(!1),(0,v.V)({message:n.statusText,type:"error",seg:10})}})},ne=function(){(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,n=(0,i.Z)({},W);if("NOMBRE_PERFIL"in e&&(n.NOMBRE_PERFIL=e.NOMBRE_PERFIL?"":"El campo Nombre de Perfil es requerido"),q((0,i.Z)({},n)),console.log(n,Object.values(n).every((function(e){return""===e}))),e===w)return Object.values(n).every((function(e){return""===e}))})()&&(e(!0),(0,m.a)({path:j.B3.SEGURIDAD.PERFILES.NEW,body:w,fnRequest:b.yA,success:function(n){ee(),U(!1),z(),e(!1),(0,v.V)({message:n.statusText,type:"success",seg:10})},error:function(n){z(),U(!1),e(!1),(0,v.V)({message:n.statusText,type:"error",seg:10})}}))},te=function(){U(!1),Y()};return(0,h.useEffect)((function(){ee()}),[]),(0,N.jsxs)(a.Z,{children:[(0,N.jsxs)(s.Z,{direction:"row",spacing:3,children:[(0,N.jsx)(f.Z.Title,{variant:"h1",component:"h1",title:"Perfiles"}),(0,N.jsx)(f.Z.ButtonComponent,{variant:"primary-small",type:"admin",title:"Nuevo Perfil",onClick:function(){return U(!0)}})]}),(0,N.jsx)("br",{}),(0,N.jsxs)(a.Z,{children:[(0,N.jsx)(f.Z.TextComponent,{variant:"h3",component:"div",children:"Filtros de B\xfasqueda"}),(0,N.jsx)("br",{}),(0,N.jsxs)(o.ZP,{container:!0,spacing:2,children:[(0,N.jsx)(o.ZP,{item:!0,xs:3,children:(0,N.jsx)(f.Z.InputComponent,{label:"Nombre",name:"NOMBRE_PERFIL",value:X.NOMBRE_PERFIL,onChange:J})}),(0,N.jsx)(o.ZP,{item:!0,xs:3,children:(0,N.jsx)(f.Z.SelectComponent,{label:"Estado",name:"ESTADO",list:y,value:X.ESTADO,onChange:J})})]}),(0,N.jsx)("br",{}),(0,N.jsx)(I.Z,{resetForm:function(){return Y()},filterForm:function(){return ee()}})]}),(0,N.jsx)("br",{}),(0,N.jsx)(f.Z.TableComponents,{pagination:k,setPagination:D,fnPagination:ee,children:(0,N.jsxs)(c.Z,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,N.jsx)(l.Z,{children:(0,N.jsxs)(u.Z,{children:[(0,N.jsx)(d.Z,{children:"Nombre"}),(0,N.jsx)(d.Z,{children:"Administrable"}),(0,N.jsx)(d.Z,{children:"Operaci\xf3n"})]})}),(0,N.jsx)(x.Z,{children:S.length>0?S.map((function(e,n){return(0,N.jsxs)(u.Z,{hover:!0,role:"checkbox",tabIndex:-1,children:[(0,N.jsx)(d.Z,{children:e.NOMBRE_PERFIL}),(0,N.jsx)(d.Z,{children:e.IS_MANAGEABLE?"Administrable":"No Administrable"}),(0,N.jsx)(d.Z,{children:(0,N.jsxs)(s.Z,{direction:"row",spacing:1,children:[(0,N.jsx)(f.Z.ButtonIconComponent,{title:"Editar",icon:Z.W.EDIT,onClick:function(){return function(e){U(!0),V(e)}(e)}}),(0,N.jsx)(f.Z.ButtonIconComponent,{title:"Eliminar",icon:Z.W.DELETE}),(0,N.jsx)(f.Z.ButtonComponent,{title:"CONFIGURAR",variant:"secondary-small",type:"admin",onClick:function(){return $(C.v.PERFILES_CONFIG+e._id)}})]})})]},n)})):(0,N.jsx)(u.Z,{hover:!0,role:"checkbox",tabIndex:-1,children:(0,N.jsx)(d.Z,{colSpan:5,align:"center",children:"Todav\xeda no se insert\xf3 ningun registro"})})})]})}),(0,N.jsxs)(f.Z.Modal,{open:L,setOpen:te,minWidth:600,fullWidth:!0,maxWidth:"sm",title:"Nuevo Perfil",children:[(0,N.jsxs)(o.ZP,{container:!0,spacing:3,children:[(0,N.jsx)(o.ZP,{item:!0,xs:12,children:(0,N.jsx)(f.Z.InputComponent,{label:"Nombre de la Sub P\xe1gina",name:"NOMBRE_PERFIL",onChange:H,value:w.NOMBRE_PERFIL,error:W.NOMBRE_PERFIL})}),(0,N.jsx)(o.ZP,{item:!0,xs:12,children:(0,N.jsx)(f.Z.SelectComponent,{label:"Estado",list:y,name:"ESTADO",value:w.ESTADO,onChange:H})}),(0,N.jsx)(o.ZP,{item:!0,xs:12,children:(0,N.jsx)(f.Z.SelectComponent,{label:"Administrable",list:y,name:"IS_MANAGEABLE",value:w.IS_MANAGEABLE,onChange:H})})]}),(0,N.jsx)("br",{}),(0,N.jsxs)(s.Z,{direction:"row",spacing:3,justifyContent:"center",children:[(0,N.jsx)(f.Z.ButtonComponent,{title:"VOLVER",variant:"secondary-normal",type:"admin",icon:Z.W.BACK,onClick:function(){return te()}}),(0,N.jsx)(f.Z.ButtonComponent,{title:"Guardar",variant:"primary-normal",type:"admin",icon:Z.W.SAVE,onClick:function(){return ne()}})]})]})]})}},7854:function(e,n,t){t.r(n),t.d(n,{default:function(){return S}});var r=t(3433),i=t(4942),a=t(1413),s=t(9439),o=t(2791),c=t(8870),l=t(3767),u=t(1889),d=t(9836),x=t(3382),h=t(5855),f=t(3994),Z=t(9412),m=t(5760),p=t(6871),j=t(589),E=t(6249),g=t(9969),I=t(4454),b=t(5523),v=t(5763),_=t(6206),C=t(865),N=t(7535),R=t(4634),P=t(8012),A=t(184),y={};function S(){var e={background:"#F6F6F6",border:"1px solid var(--text)",padding:"5px 15px",borderRadius:"5px",height:"100%"},n=(0,j.Z)(),t=(0,p.s0)(),S=(0,o.useState)([]),O=(0,s.Z)(S,2),B=O[0],F=O[1],k=(0,o.useState)([]),D=(0,s.Z)(k,2),M=D[0],T=D[1],L=(0,o.useState)({}),U=(0,s.Z)(L,2),G=U[0],w=U[1],V=(0,o.useState)(null),W=(0,s.Z)(V,2),q=W[0],H=W[1],z=(0,_.Q)(y),K=z.data,Q=z.setData,X=(0,p.UO)().id,J=(0,o.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;n(!0),(0,E.a)({path:g.B3.CONFIGURACION.MENU.INDEX,body:{},fnRequest:N.yA,pagination:!0,rowsPerPage:e,page:t,success:function(e){n(!1),F(e.data)},error:function(e){n(!1),(0,R.V)({message:e.statusText,type:"error",seg:10})}})}),[n]),Y=function(e){n(!0),(0,E.a)({path:g.B3.CONFIG_MENU.SEARCH_SUBPAGINAS+e,body:{},fnRequest:N.yA,success:function(e){var t,r=null===(t=e.data)||void 0===t?void 0:t.ID_CONFIGURACION_SUBMENU;T(r),n(!1)},error:function(e){n(!1),(0,R.V)({message:e.statusText,type:"error",seg:10})}})},$=(0,o.useCallback)((function(){n(!0),(0,E.a)({path:"".concat(g.SP,"/").concat(X),body:{},fnRequest:v.y,success:function(e){w(e.data),n(!1)},error:function(e){n(!1),(0,R.V)({message:e.statusText,type:"error",seg:10})}})}),[X]),ee=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")},ne=function(e){return!!(K[ee(e._id)]&&K[ee(e._id)].length>0)},te=function(e){return!!K[ee(q._id)]&&!!K[ee(q._id)].includes(e._id)};return(0,o.useEffect)((function(){$(),J()}),[J,$]),(0,o.useEffect)((function(){q&&Y(q._id)}),[q]),(0,o.useEffect)((function(){G._id&&function(e){n(!0),(0,E.a)({path:"".concat(g.SD,"/").concat(e),body:{},fnRequest:C._,success:function(e){var t,r={};null===(t=e.data)||void 0===t||t.forEach((function(e){var n=Array.from(e.ID_CONFIGURACION_SUBMENU,(function(e){return e._id}));r[e.ID_CONFIGURACION_MENU._id]=n})),Q(r),n(!1)},error:function(e){n(!1),(0,R.V)({message:e.statusText,type:"error",seg:10})}})}(G._id)}),[G]),(0,A.jsxs)(c.Z,{children:[(0,A.jsx)(l.Z,{direction:"row",spacing:3,children:(0,A.jsx)(Z.Z.Title,{variant:"h1",component:"h1",title:"Perfiles"})}),(0,A.jsx)("br",{}),(0,A.jsxs)(l.Z,{direction:"row",spacing:2,alignItems:"center",children:[(0,A.jsx)(Z.Z.TextComponent,{variant:"text1",children:"Nombre de Perfil"}),(0,A.jsx)(c.Z,{sx:e,children:(0,A.jsx)(Z.Z.TextComponent,{variant:"text1",children:G.NOMBRE_PERFIL})})]}),(0,A.jsx)("br",{}),(0,A.jsxs)(u.ZP,{container:!0,spacing:2,children:[(0,A.jsx)(u.ZP,{item:!0,xs:12,sm:12,md:4,lg:4,xl:4,xxl:4,children:(0,A.jsx)(Z.Z.TableComponents,{children:(0,A.jsx)(d.Z,{stickyHeader:!0,"aria-label":"sticky table",children:(0,A.jsx)(x.Z,{children:B.length>0?B.map((function(e,n){return(0,A.jsxs)(h.Z,{role:"checkbox",tabIndex:-1,className:q&&q._id===e._id?"background-gris_500":"",children:[(0,A.jsxs)(f.Z,{children:[(0,A.jsx)(b.Z,{control:(0,A.jsx)(I.Z,{color:"default",checked:ne(e),onChange:function(n){return function(e,n){if(!q)return alert("No ha selecionado la p\xe1gina");if(q._id!==n._id)return alert("Selecciona la pagina para actualizar");var t=e.target.checked,r=ee(n._id);if(Y(q._id),t){var s=Array.from(M,(function(e){return e._id}));Q((0,a.Z)((0,a.Z)({},K),{},(0,i.Z)({},r,s)))}else Q((0,a.Z)((0,a.Z)({},K),{},(0,i.Z)({},r,[])))}(n,e)}})}),e.NOMBRE_MENU]}),(0,A.jsx)(f.Z,{children:(0,A.jsx)(Z.Z.ButtonIconComponent,{title:"Sub P\xe1ginas",icon:m.W.ARROW_RIGHT,onClick:function(){return H(e)}})})]},n)})):(0,A.jsx)(h.Z,{hover:!0,role:"checkbox",tabIndex:-1,children:(0,A.jsx)(f.Z,{colSpan:4,align:"center",children:"Todav\xeda no se insert\xf3 ningun registro"})})})})})}),(0,A.jsx)(u.ZP,{item:!0,xs:12,sm:12,md:8,lg:8,xl:8,xxl:8,justifyContent:"center",alignItems:"center",children:K&&q?(0,A.jsx)(Z.Z.TableComponents,{children:(0,A.jsx)(d.Z,{stickyHeader:!0,"aria-label":"sticky table",children:(0,A.jsx)(x.Z,{children:M.length>0?M.map((function(e,n){return(0,A.jsx)(h.Z,{hover:!0,role:"checkbox",tabIndex:-1,children:(0,A.jsxs)(f.Z,{children:[(0,A.jsx)(b.Z,{control:(0,A.jsx)(I.Z,{"aria-label":"Checkbox demo",color:"default",checked:te(e),onChange:function(n){return function(e,n){var t=e.target.checked,s=K[ee(q._id)],o=ee(q._id);if(t){var c=K[o]||[];return Q((0,a.Z)((0,a.Z)({},K),{},(0,i.Z)({},o,[].concat((0,r.Z)(c),[n._id]))))}var l=s.filter((function(e){return e!==n._id}));return Q((0,a.Z)((0,a.Z)({},K),{},(0,i.Z)({},o,l)))}(n,e)}})}),e.NOMBRE_SUBMENU]})},n)})):(0,A.jsx)(h.Z,{hover:!0,role:"checkbox",tabIndex:-1,children:(0,A.jsx)(f.Z,{colSpan:4,align:"center",children:"Todav\xeda no se insert\xf3 ningun registro"})})})})}):(0,A.jsx)(c.Z,{sx:(0,a.Z)({display:"flex",justifyContent:"center",alignItems:"center"},e),children:(0,A.jsx)(Z.Z.TextComponent,{variant:"text1",children:"Selecciona una P\xe1gina para comenzar"})})})]}),(0,A.jsx)("br",{}),(0,A.jsxs)(l.Z,{direction:"row",spacing:3,justifyContent:"center",children:[(0,A.jsx)(Z.Z.ButtonComponent,{title:"VOLVER",variant:"secondary-normal",type:"admin",icon:m.W.BACK,onClick:function(){return t(P.v.PERFILES_ADMIN)}}),(0,A.jsx)(Z.Z.ButtonComponent,{title:"Guardar",variant:"primary-normal",type:"admin",icon:m.W.SAVE,onClick:function(){var e=[];for(var r in K)if(K[r]&&0!==K[r].length){var i={ID_SEGURIDAD_PERFILES:G._id,ID_CONFIGURACION_SUBMENU:K[r],ID_CONFIGURACION_MENU:r};e.push(i)}n(!0),(0,E.a)({path:g.D_,body:{PAGINAS_PERFIL:e,ID_PERFIL:G._id},fnRequest:C.b,success:function(e){n(!1),(0,R.V)({message:e.statusText,type:"success",seg:10}),t(P.v.PERFILES_ADMIN)},error:function(e){n(!1),(0,R.V)({message:e.statusText,type:"error",seg:10})}})}})]})]})}}}]);
//# sourceMappingURL=92.d1c7cdbe.chunk.js.map