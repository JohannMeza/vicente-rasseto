"use strict";(self.webpackChunksistema_web=self.webpackChunksistema_web||[]).push([[92,502,854],{3092:function(e,n,t){t.r(n);var r=t(2791),a=t(6871),i=t(2051),s=t(7854),o=t(184),c=function(){return(0,o.jsxs)(a.Z5,{children:[(0,o.jsx)(a.AW,{path:"/admin",element:(0,o.jsx)(i.default,{})}),(0,o.jsx)(a.AW,{path:"/:id",element:(0,o.jsx)(s.default,{})})]})};n.default=(0,r.memo)(c)},2051:function(e,n,t){t.r(n),t.d(n,{default:function(){return A}});var r=t(9439),a=t(1413),i=t(8870),s=t(3767),o=t(1889),c=t(9836),l=t(6890),u=t(5855),d=t(3994),x=t(3382),f=t(2791),E=t(4673),h=t(5760),m=t(6249),p=t(6206),I=t(9969),g=t(6871),j=t(3943),S=t(4092),_=t(7535),R=t(6915),v=t(589),Z=t(8012),C=t(184),N={rowsPerPage:10,page:0,count:0},b={NOMBRE_PERFIL:"",IS_MANAGEABLE:!0,ESTADO:!0},O={NOMBRE_PERFIL:null,ESTADO:!0},P=[{label:"Activo",value:!0},{label:"Inactivo",value:!1}];function A(){var e=(0,v.default)(),n=(0,f.useState)([]),t=(0,r.Z)(n,2),A=t[0],U=t[1],F=(0,f.useState)(N),D=(0,r.Z)(F,2),M=D[0],y=D[1],B=(0,f.useState)(!1),T=(0,r.Z)(B,2),k=T[0],L=T[1],G=(0,p.useFormValidation)(b,!0),q=G.data,w=G.setData,V=G.errors,W=G.setErrors,H=G.handleInputFormChange,X=G.resetForm,z=(0,j.useForm)(O),K=(0,r.Z)(z,3),J=K[0],Q=K[1],Y=K[2],$=(0,g.s0)(),ee=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e(!0),(0,m.SaveRequestData)({path:I.pathServer.SEGURIDAD.PERFILES.INDEX,body:J,fnRequest:_.SERVICES_POST,pagination:!0,rowsPerPage:n,page:t,success:function(n){var t=n.rowsPerPage,r=n.count,a=n.page;--a,y({rowsPerPage:t,count:r,page:a}),U(n.data),e(!1)},error:function(n){e(!1),(0,R.MessageUtil)({message:n.statusText,type:"error",seg:10})}})},ne=function(){(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,n=(0,a.Z)({},V);if("NOMBRE_PERFIL"in e&&(n.NOMBRE_PERFIL=e.NOMBRE_PERFIL?"":"El campo Nombre de Perfil es requerido"),W((0,a.Z)({},n)),console.log(n,Object.values(n).every((function(e){return""===e}))),e===q)return Object.values(n).every((function(e){return""===e}))})()&&(e(!0),(0,m.SaveRequestData)({path:I.pathServer.SEGURIDAD.PERFILES.NEW,body:q,fnRequest:_.SERVICES_POST,success:function(n){ee(),L(!1),X(),e(!1),(0,R.MessageUtil)({message:n.statusText,type:"success",seg:10})},error:function(n){X(),L(!1),e(!1),(0,R.MessageUtil)({message:n.statusText,type:"error",seg:10})}}))},te=function(){L(!1),Y()};return(0,f.useEffect)((function(){ee()}),[]),(0,C.jsxs)(i.Z,{children:[(0,C.jsxs)(s.Z,{direction:"row",spacing:3,children:[(0,C.jsx)(E.default.Title,{variant:"h1",component:"h1",title:"Perfiles"}),(0,C.jsx)(E.default.ButtonComponent,{variant:"primary-small",type:"admin",title:"Nuevo Perfil",onClick:function(){return L(!0)}})]}),(0,C.jsx)("br",{}),(0,C.jsxs)(i.Z,{children:[(0,C.jsx)(E.default.TextComponent,{variant:"h3",component:"div",children:"Filtros de B\xfasqueda"}),(0,C.jsx)("br",{}),(0,C.jsxs)(o.ZP,{container:!0,spacing:2,children:[(0,C.jsx)(o.ZP,{item:!0,xs:3,children:(0,C.jsx)(E.default.InputComponent,{label:"Nombre",name:"NOMBRE_PERFIL",value:J.NOMBRE_PERFIL,onChange:Q})}),(0,C.jsx)(o.ZP,{item:!0,xs:3,children:(0,C.jsx)(E.default.SelectComponent,{label:"Estado",name:"ESTADO",list:P,value:J.ESTADO,onChange:Q})})]}),(0,C.jsx)("br",{}),(0,C.jsx)(S.default,{resetForm:function(){return Y()},filterForm:function(){return ee()}})]}),(0,C.jsx)("br",{}),(0,C.jsx)(E.default.TableComponents,{pagination:M,setPagination:y,fnPagination:ee,children:(0,C.jsxs)(c.Z,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,C.jsx)(l.Z,{children:(0,C.jsxs)(u.Z,{children:[(0,C.jsx)(d.Z,{children:"Nombre"}),(0,C.jsx)(d.Z,{children:"Administrable"}),(0,C.jsx)(d.Z,{children:"Operaci\xf3n"})]})}),(0,C.jsx)(x.Z,{children:A.length>0?A.map((function(e,n){return(0,C.jsxs)(u.Z,{hover:!0,role:"checkbox",tabIndex:-1,children:[(0,C.jsx)(d.Z,{children:e.NOMBRE_PERFIL}),(0,C.jsx)(d.Z,{children:e.IS_MANAGEABLE?"Administrable":"No Administrable"}),(0,C.jsx)(d.Z,{children:(0,C.jsxs)(s.Z,{direction:"row",spacing:1,children:[(0,C.jsx)(E.default.ButtonIconComponent,{title:"Editar",icon:h.ICON.EDIT,onClick:function(){return function(e){L(!0),w(e)}(e)}}),(0,C.jsx)(E.default.ButtonIconComponent,{title:"Eliminar",icon:h.ICON.DELETE}),(0,C.jsx)(E.default.ButtonComponent,{title:"CONFIGURAR",variant:"secondary-small",type:"admin",onClick:function(){return $(Z.pathFront.PERFILES_CONFIG+e._id)}})]})})]},n)})):(0,C.jsx)(u.Z,{hover:!0,role:"checkbox",tabIndex:-1,children:(0,C.jsx)(d.Z,{colSpan:5,align:"center",children:"Todav\xeda no se insert\xf3 ningun registro"})})})]})}),(0,C.jsxs)(E.default.Modal,{open:k,setOpen:te,minWidth:600,fullWidth:!0,maxWidth:"sm",title:"Nuevo Perfil",children:[(0,C.jsxs)(o.ZP,{container:!0,spacing:3,children:[(0,C.jsx)(o.ZP,{item:!0,xs:12,children:(0,C.jsx)(E.default.InputComponent,{label:"Nombre de la Sub P\xe1gina",name:"NOMBRE_PERFIL",onChange:H,value:q.NOMBRE_PERFIL,error:V.NOMBRE_PERFIL})}),(0,C.jsx)(o.ZP,{item:!0,xs:12,children:(0,C.jsx)(E.default.SelectComponent,{label:"Estado",list:P,name:"ESTADO",value:q.ESTADO,onChange:H})}),(0,C.jsx)(o.ZP,{item:!0,xs:12,children:(0,C.jsx)(E.default.SelectComponent,{label:"Administrable",list:P,name:"IS_MANAGEABLE",value:q.IS_MANAGEABLE,onChange:H})})]}),(0,C.jsx)("br",{}),(0,C.jsxs)(s.Z,{direction:"row",spacing:3,justifyContent:"center",children:[(0,C.jsx)(E.default.ButtonComponent,{title:"VOLVER",variant:"secondary-normal",type:"admin",icon:h.ICON.BACK,onClick:function(){return te()}}),(0,C.jsx)(E.default.ButtonComponent,{title:"Guardar",variant:"primary-normal",type:"admin",icon:h.ICON.SAVE,onClick:function(){return ne()}})]})]})]})}},7854:function(e,n,t){t.r(n),t.d(n,{default:function(){return A}});var r=t(3433),a=t(4942),i=t(1413),s=t(9439),o=t(2791),c=t(8870),l=t(3767),u=t(1889),d=t(9836),x=t(3382),f=t(5855),E=t(3994),h=t(4673),m=t(5760),p=t(6871),I=t(589),g=t(6249),j=t(9969),S=t(4454),_=t(5523),R=t(5763),v=t(6206),Z=t(865),C=t(7535),N=t(6915),b=t(8012),O=t(184),P={};function A(){var e={background:"#F6F6F6",border:"1px solid var(--text)",padding:"5px 15px",borderRadius:"5px",height:"100%"},n=(0,I.default)(),t=(0,p.s0)(),A=(0,o.useState)([]),U=(0,s.Z)(A,2),F=U[0],D=U[1],M=(0,o.useState)([]),y=(0,s.Z)(M,2),B=y[0],T=y[1],k=(0,o.useState)({}),L=(0,s.Z)(k,2),G=L[0],q=L[1],w=(0,o.useState)(null),V=(0,s.Z)(w,2),W=V[0],H=V[1],X=(0,v.useFormValidation)(P),z=X.data,K=X.setData,J=(0,p.UO)().id,Q=(0,o.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;n(!0),(0,g.SaveRequestData)({path:j.pathServer.CONFIGURACION.MENU.INDEX,body:{},fnRequest:C.SERVICES_POST,pagination:!0,rowsPerPage:e,page:t,success:function(e){n(!1),D(e.data)},error:function(e){n(!1),(0,N.MessageUtil)({message:e.statusText,type:"error",seg:10})}})}),[n]),Y=function(e){n(!0),(0,g.SaveRequestData)({path:j.pathServer.CONFIG_MENU.SEARCH_SUBPAGINAS+e,body:{},fnRequest:C.SERVICES_POST,success:function(e){var t,r=null===(t=e.data)||void 0===t?void 0:t.ID_CONFIGURACION_SUBMENU;T(r),n(!1)},error:function(e){n(!1),(0,N.MessageUtil)({message:e.statusText,type:"error",seg:10})}})},$=(0,o.useCallback)((function(){n(!0),(0,g.SaveRequestData)({path:"".concat(j.SEGURIDAD_PERFILES_SHOW,"/").concat(J),body:{},fnRequest:R.SEGURIDAD_PERFILES_SHOW_AXIOS,success:function(e){q(e.data),n(!1)},error:function(e){n(!1),(0,N.MessageUtil)({message:e.statusText,type:"error",seg:10})}})}),[J]),ee=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")},ne=function(e){return!!(z[ee(e._id)]&&z[ee(e._id)].length>0)},te=function(e){return!!z[ee(W._id)]&&!!z[ee(W._id)].includes(e._id)};return(0,o.useEffect)((function(){$(),Q()}),[Q,$]),(0,o.useEffect)((function(){W&&Y(W._id)}),[W]),(0,o.useEffect)((function(){G._id&&function(e){n(!0),(0,g.SaveRequestData)({path:"".concat(j.SEGURIDAD_PERFILES_MENU_SUBMENU_SHOW,"/").concat(e),body:{},fnRequest:Z.SEGURIDAD_PERFILES_MENU_SUBMENU_SHOW_AXIOS,success:function(e){var t,r={};null===(t=e.data)||void 0===t||t.forEach((function(e){var n=Array.from(e.ID_CONFIGURACION_SUBMENU,(function(e){return e._id}));r[e.ID_CONFIGURACION_MENU._id]=n})),K(r),n(!1)},error:function(e){n(!1),(0,N.MessageUtil)({message:e.statusText,type:"error",seg:10})}})}(G._id)}),[G]),(0,O.jsxs)(c.Z,{children:[(0,O.jsx)(l.Z,{direction:"row",spacing:3,children:(0,O.jsx)(h.default.Title,{variant:"h1",component:"h1",title:"Perfiles"})}),(0,O.jsx)("br",{}),(0,O.jsxs)(l.Z,{direction:"row",spacing:2,alignItems:"center",children:[(0,O.jsx)(h.default.TextComponent,{variant:"text1",children:"Nombre de Perfil"}),(0,O.jsx)(c.Z,{sx:e,children:(0,O.jsx)(h.default.TextComponent,{variant:"text1",children:G.NOMBRE_PERFIL})})]}),(0,O.jsx)("br",{}),(0,O.jsxs)(u.ZP,{container:!0,spacing:2,children:[(0,O.jsx)(u.ZP,{item:!0,xs:12,sm:12,md:4,lg:4,xl:4,xxl:4,children:(0,O.jsx)(h.default.TableComponents,{children:(0,O.jsx)(d.Z,{stickyHeader:!0,"aria-label":"sticky table",children:(0,O.jsx)(x.Z,{children:F.length>0?F.map((function(e,n){return(0,O.jsxs)(f.Z,{role:"checkbox",tabIndex:-1,className:W&&W._id===e._id?"background-gris_500":"",children:[(0,O.jsxs)(E.Z,{children:[(0,O.jsx)(_.Z,{control:(0,O.jsx)(S.Z,{color:"default",checked:ne(e),onChange:function(n){return function(e,n){if(!W)return alert("No ha selecionado la p\xe1gina");if(W._id!==n._id)return alert("Selecciona la pagina para actualizar");var t=e.target.checked,r=ee(n._id);if(Y(W._id),t){var s=Array.from(B,(function(e){return e._id}));K((0,i.Z)((0,i.Z)({},z),{},(0,a.Z)({},r,s)))}else K((0,i.Z)((0,i.Z)({},z),{},(0,a.Z)({},r,[])))}(n,e)}})}),e.NOMBRE_MENU]}),(0,O.jsx)(E.Z,{children:(0,O.jsx)(h.default.ButtonIconComponent,{title:"Sub P\xe1ginas",icon:m.ICON.ARROW_RIGHT,onClick:function(){return H(e)}})})]},n)})):(0,O.jsx)(f.Z,{hover:!0,role:"checkbox",tabIndex:-1,children:(0,O.jsx)(E.Z,{colSpan:4,align:"center",children:"Todav\xeda no se insert\xf3 ningun registro"})})})})})}),(0,O.jsx)(u.ZP,{item:!0,xs:12,sm:12,md:8,lg:8,xl:8,xxl:8,justifyContent:"center",alignItems:"center",children:z&&W?(0,O.jsx)(h.default.TableComponents,{children:(0,O.jsx)(d.Z,{stickyHeader:!0,"aria-label":"sticky table",children:(0,O.jsx)(x.Z,{children:B.length>0?B.map((function(e,n){return(0,O.jsx)(f.Z,{hover:!0,role:"checkbox",tabIndex:-1,children:(0,O.jsxs)(E.Z,{children:[(0,O.jsx)(_.Z,{control:(0,O.jsx)(S.Z,{"aria-label":"Checkbox demo",color:"default",checked:te(e),onChange:function(n){return function(e,n){var t=e.target.checked,s=z[ee(W._id)],o=ee(W._id);if(t){var c=z[o]||[];return K((0,i.Z)((0,i.Z)({},z),{},(0,a.Z)({},o,[].concat((0,r.Z)(c),[n._id]))))}var l=s.filter((function(e){return e!==n._id}));return K((0,i.Z)((0,i.Z)({},z),{},(0,a.Z)({},o,l)))}(n,e)}})}),e.NOMBRE_SUBMENU]})},n)})):(0,O.jsx)(f.Z,{hover:!0,role:"checkbox",tabIndex:-1,children:(0,O.jsx)(E.Z,{colSpan:4,align:"center",children:"Todav\xeda no se insert\xf3 ningun registro"})})})})}):(0,O.jsx)(c.Z,{sx:(0,i.Z)({display:"flex",justifyContent:"center",alignItems:"center"},e),children:(0,O.jsx)(h.default.TextComponent,{variant:"text1",children:"Selecciona una P\xe1gina para comenzar"})})})]}),(0,O.jsx)("br",{}),(0,O.jsxs)(l.Z,{direction:"row",spacing:3,justifyContent:"center",children:[(0,O.jsx)(h.default.ButtonComponent,{title:"VOLVER",variant:"secondary-normal",type:"admin",icon:m.ICON.BACK,onClick:function(){return t(b.pathFront.PERFILES_ADMIN)}}),(0,O.jsx)(h.default.ButtonComponent,{title:"Guardar",variant:"primary-normal",type:"admin",icon:m.ICON.SAVE,onClick:function(){var e=[];for(var r in z)if(z[r]&&0!==z[r].length){var a={ID_SEGURIDAD_PERFILES:G._id,ID_CONFIGURACION_SUBMENU:z[r],ID_CONFIGURACION_MENU:r};e.push(a)}n(!0),(0,g.SaveRequestData)({path:j.SEGURIDAD_PERFILES_MENU_SUBMENU_STORE,body:{PAGINAS_PERFIL:e,ID_PERFIL:G._id},fnRequest:Z.SEGURIDAD_PERFILES_MENU_SUBMENU_STORE_AXIOS,success:function(e){n(!1),(0,N.MessageUtil)({message:e.statusText,type:"success",seg:10}),t(b.pathFront.PERFILES_ADMIN)},error:function(e){n(!1),(0,N.MessageUtil)({message:e.statusText,type:"error",seg:10})}})}})]})]})}}}]);
//# sourceMappingURL=92.8916430d.chunk.js.map