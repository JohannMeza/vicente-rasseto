"use strict";(self.webpackChunksistema_web=self.webpackChunksistema_web||[]).push([[854],{7854:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var r=n(3433),a=n(4942),i=n(1413),s=n(9439),c=n(2791),o=n(8870),l=n(3767),u=n(1889),d=n(9836),f=n(3382),x=n(5855),_=n(3994),h=n(4673),E=n(5760),I=n(6871),S=n(589),g=n(6249),p=n(9969),R=n(4454),U=n(5523),N=n(5763),Z=n(6206),j=n(865),m=n(7535),C=n(6915),v=n(8012),b=n(184),O={};function D(){var e={background:"#F6F6F6",border:"1px solid var(--text)",padding:"5px 15px",borderRadius:"5px",height:"100%"},t=(0,S.default)(),n=(0,I.s0)(),D=(0,c.useState)([]),A=(0,s.Z)(D,2),M=A[0],F=A[1],y=(0,c.useState)([]),P=(0,s.Z)(y,2),k=P[0],T=P[1],G=(0,c.useState)({}),B=(0,s.Z)(G,2),L=B[0],q=B[1],w=(0,c.useState)(null),H=(0,s.Z)(w,2),V=H[0],W=H[1],X=(0,Z.useFormValidation)(O),z=X.data,K=X.setData,J=(0,I.UO)().id,Q=(0,c.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t(!0),(0,g.SaveRequestData)({path:p.pathServer.CONFIGURACION.MENU.INDEX,body:{},fnRequest:m.SERVICES_POST,pagination:!0,rowsPerPage:e,page:n,success:function(e){t(!1),F(e.data)},error:function(e){t(!1),(0,C.MessageUtil)({message:e.statusText,type:"error",seg:10})}})}),[t]),Y=function(e){t(!0),(0,g.SaveRequestData)({path:p.pathServer.CONFIG_MENU.SEARCH_SUBPAGINAS+e,body:{},fnRequest:m.SERVICES_POST,success:function(e){var n,r=null===(n=e.data)||void 0===n?void 0:n.ID_CONFIGURACION_SUBMENU;T(r),t(!1)},error:function(e){t(!1),(0,C.MessageUtil)({message:e.statusText,type:"error",seg:10})}})},$=(0,c.useCallback)((function(){t(!0),(0,g.SaveRequestData)({path:"".concat(p.SEGURIDAD_PERFILES_SHOW,"/").concat(J),body:{},fnRequest:N.SEGURIDAD_PERFILES_SHOW_AXIOS,success:function(e){q(e.data),t(!1)},error:function(e){t(!1),(0,C.MessageUtil)({message:e.statusText,type:"error",seg:10})}})}),[J]),ee=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")},te=function(e){return!!(z[ee(e._id)]&&z[ee(e._id)].length>0)},ne=function(e){return!!z[ee(V._id)]&&!!z[ee(V._id)].includes(e._id)};return(0,c.useEffect)((function(){$(),Q()}),[Q,$]),(0,c.useEffect)((function(){V&&Y(V._id)}),[V]),(0,c.useEffect)((function(){L._id&&function(e){t(!0),(0,g.SaveRequestData)({path:"".concat(p.SEGURIDAD_PERFILES_MENU_SUBMENU_SHOW,"/").concat(e),body:{},fnRequest:j.SEGURIDAD_PERFILES_MENU_SUBMENU_SHOW_AXIOS,success:function(e){var n,r={};null===(n=e.data)||void 0===n||n.forEach((function(e){var t=Array.from(e.ID_CONFIGURACION_SUBMENU,(function(e){return e._id}));r[e.ID_CONFIGURACION_MENU._id]=t})),K(r),t(!1)},error:function(e){t(!1),(0,C.MessageUtil)({message:e.statusText,type:"error",seg:10})}})}(L._id)}),[L]),(0,b.jsxs)(o.Z,{children:[(0,b.jsx)(l.Z,{direction:"row",spacing:3,children:(0,b.jsx)(h.default.Title,{variant:"h1",component:"h1",title:"Perfiles"})}),(0,b.jsx)("br",{}),(0,b.jsxs)(l.Z,{direction:"row",spacing:2,alignItems:"center",children:[(0,b.jsx)(h.default.TextComponent,{variant:"text1",children:"Nombre de Perfil"}),(0,b.jsx)(o.Z,{sx:e,children:(0,b.jsx)(h.default.TextComponent,{variant:"text1",children:L.NOMBRE_PERFIL})})]}),(0,b.jsx)("br",{}),(0,b.jsxs)(u.ZP,{container:!0,spacing:2,children:[(0,b.jsx)(u.ZP,{item:!0,xs:12,sm:12,md:4,lg:4,xl:4,xxl:4,children:(0,b.jsx)(h.default.TableComponents,{children:(0,b.jsx)(d.Z,{stickyHeader:!0,"aria-label":"sticky table",children:(0,b.jsx)(f.Z,{children:M.length>0?M.map((function(e,t){return(0,b.jsxs)(x.Z,{role:"checkbox",tabIndex:-1,className:V&&V._id===e._id?"background-gris_500":"",children:[(0,b.jsxs)(_.Z,{children:[(0,b.jsx)(U.Z,{control:(0,b.jsx)(R.Z,{color:"default",checked:te(e),onChange:function(t){return function(e,t){if(!V)return alert("No ha selecionado la p\xe1gina");if(V._id!==t._id)return alert("Selecciona la pagina para actualizar");var n=e.target.checked,r=ee(t._id);if(Y(V._id),n){var s=Array.from(k,(function(e){return e._id}));K((0,i.Z)((0,i.Z)({},z),{},(0,a.Z)({},r,s)))}else K((0,i.Z)((0,i.Z)({},z),{},(0,a.Z)({},r,[])))}(t,e)}})}),e.NOMBRE_MENU]}),(0,b.jsx)(_.Z,{children:(0,b.jsx)(h.default.ButtonIconComponent,{title:"Sub P\xe1ginas",icon:E.ICON.ARROW_RIGHT,onClick:function(){return W(e)}})})]},t)})):(0,b.jsx)(x.Z,{hover:!0,role:"checkbox",tabIndex:-1,children:(0,b.jsx)(_.Z,{colSpan:4,align:"center",children:"Todav\xeda no se insert\xf3 ningun registro"})})})})})}),(0,b.jsx)(u.ZP,{item:!0,xs:12,sm:12,md:8,lg:8,xl:8,xxl:8,justifyContent:"center",alignItems:"center",children:z&&V?(0,b.jsx)(h.default.TableComponents,{children:(0,b.jsx)(d.Z,{stickyHeader:!0,"aria-label":"sticky table",children:(0,b.jsx)(f.Z,{children:k.length>0?k.map((function(e,t){return(0,b.jsx)(x.Z,{hover:!0,role:"checkbox",tabIndex:-1,children:(0,b.jsxs)(_.Z,{children:[(0,b.jsx)(U.Z,{control:(0,b.jsx)(R.Z,{"aria-label":"Checkbox demo",color:"default",checked:ne(e),onChange:function(t){return function(e,t){var n=e.target.checked,s=z[ee(V._id)],c=ee(V._id);if(n){var o=z[c]||[];return K((0,i.Z)((0,i.Z)({},z),{},(0,a.Z)({},c,[].concat((0,r.Z)(o),[t._id]))))}var l=s.filter((function(e){return e!==t._id}));return K((0,i.Z)((0,i.Z)({},z),{},(0,a.Z)({},c,l)))}(t,e)}})}),e.NOMBRE_SUBMENU]})},t)})):(0,b.jsx)(x.Z,{hover:!0,role:"checkbox",tabIndex:-1,children:(0,b.jsx)(_.Z,{colSpan:4,align:"center",children:"Todav\xeda no se insert\xf3 ningun registro"})})})})}):(0,b.jsx)(o.Z,{sx:(0,i.Z)({display:"flex",justifyContent:"center",alignItems:"center"},e),children:(0,b.jsx)(h.default.TextComponent,{variant:"text1",children:"Selecciona una P\xe1gina para comenzar"})})})]}),(0,b.jsx)("br",{}),(0,b.jsxs)(l.Z,{direction:"row",spacing:3,justifyContent:"center",children:[(0,b.jsx)(h.default.ButtonComponent,{title:"VOLVER",variant:"secondary-normal",type:"admin",icon:E.ICON.BACK,onClick:function(){return n(v.pathFront.PERFILES_ADMIN)}}),(0,b.jsx)(h.default.ButtonComponent,{title:"Guardar",variant:"primary-normal",type:"admin",icon:E.ICON.SAVE,onClick:function(){var e=[];for(var r in z)if(z[r]&&0!==z[r].length){var a={ID_SEGURIDAD_PERFILES:L._id,ID_CONFIGURACION_SUBMENU:z[r],ID_CONFIGURACION_MENU:r};e.push(a)}t(!0),(0,g.SaveRequestData)({path:p.SEGURIDAD_PERFILES_MENU_SUBMENU_STORE,body:{PAGINAS_PERFIL:e,ID_PERFIL:L._id},fnRequest:j.SEGURIDAD_PERFILES_MENU_SUBMENU_STORE_AXIOS,success:function(e){t(!1),(0,C.MessageUtil)({message:e.statusText,type:"success",seg:10}),n(v.pathFront.PERFILES_ADMIN)},error:function(e){t(!1),(0,C.MessageUtil)({message:e.statusText,type:"error",seg:10})}})}})]})]})}}}]);
//# sourceMappingURL=854.d8c1495f.chunk.js.map