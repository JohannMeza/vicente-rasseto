"use strict";(self.webpackChunksistema_web=self.webpackChunksistema_web||[]).push([[854],{7854:function(e,n,t){t.r(n),t.d(n,{default:function(){return U}});var r=t(3433),i=t(4942),a=t(1413),s=t(9439),c=t(2791),o=t(8870),u=t(3767),l=t(1889),d=t(9836),x=t(3382),f=t(5855),h=t(3994),Z=t(7204),g=t(5760),_=t(6871),p=t(589),j=t(6249),I=t(9969),m=t(4454),b=t(5523),C=t(5763),N=t(6206),v=t(865),E=t(7535),y=t(4634),R=t(8012),k=t(184),S={};function U(){var e={background:"#F6F6F6",border:"1px solid var(--text)",padding:"5px 15px",borderRadius:"5px",height:"100%"},n=(0,p.Z)(),t=(0,_.s0)(),U=(0,c.useState)([]),A=(0,s.Z)(U,2),O=A[0],P=A[1],F=(0,c.useState)([]),D=(0,s.Z)(F,2),T=D[0],B=D[1],M=(0,c.useState)({}),G=(0,s.Z)(M,2),V=G[0],w=G[1],L=(0,c.useState)(null),q=(0,s.Z)(L,2),H=q[0],W=q[1],z=(0,N.Q)(S),K=z.data,Q=z.setData,X=(0,_.UO)().id,J=(0,c.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;n(!0),(0,j.a)({path:I.B3.CONFIGURACION.MENU.INDEX,body:{},fnRequest:E.yA,pagination:!0,rowsPerPage:e,page:t,success:function(e){n(!1),P(e.data)},error:function(e){n(!1),(0,y.V)({message:e.statusText,type:"error",seg:10})}})}),[n]),Y=function(e){n(!0),(0,j.a)({path:I.B3.CONFIG_MENU.SEARCH_SUBPAGINAS+e,body:{},fnRequest:E.yA,success:function(e){var t,r=null===(t=e.data)||void 0===t?void 0:t.ID_CONFIGURACION_SUBMENU;B(r),n(!1)},error:function(e){n(!1),(0,y.V)({message:e.statusText,type:"error",seg:10})}})},$=(0,c.useCallback)((function(){n(!0),(0,j.a)({path:"".concat(I.SP,"/").concat(X),body:{},fnRequest:C.y,success:function(e){w(e.data),n(!1)},error:function(e){n(!1),(0,y.V)({message:e.statusText,type:"error",seg:10})}})}),[X]),ee=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")},ne=function(e){return!!(K[ee(e._id)]&&K[ee(e._id)].length>0)},te=function(e){return!!K[ee(H._id)]&&!!K[ee(H._id)].includes(e._id)};return(0,c.useEffect)((function(){$(),J()}),[J,$]),(0,c.useEffect)((function(){H&&Y(H._id)}),[H]),(0,c.useEffect)((function(){V._id&&function(e){n(!0),(0,j.a)({path:"".concat(I.SD,"/").concat(e),body:{},fnRequest:v._,success:function(e){var t,r={};null===(t=e.data)||void 0===t||t.forEach((function(e){var n=Array.from(e.ID_CONFIGURACION_SUBMENU,(function(e){return e._id}));r[e.ID_CONFIGURACION_MENU._id]=n})),Q(r),n(!1)},error:function(e){n(!1),(0,y.V)({message:e.statusText,type:"error",seg:10})}})}(V._id)}),[V]),(0,k.jsxs)(o.Z,{children:[(0,k.jsx)(u.Z,{direction:"row",spacing:3,children:(0,k.jsx)(Z.Z.Title,{variant:"h1",component:"h1",title:"Perfiles"})}),(0,k.jsx)("br",{}),(0,k.jsxs)(u.Z,{direction:"row",spacing:2,alignItems:"center",children:[(0,k.jsx)(Z.Z.TextComponent,{variant:"text1",children:"Nombre de Perfil"}),(0,k.jsx)(o.Z,{sx:e,children:(0,k.jsx)(Z.Z.TextComponent,{variant:"text1",children:V.NOMBRE_PERFIL})})]}),(0,k.jsx)("br",{}),(0,k.jsxs)(l.ZP,{container:!0,spacing:2,children:[(0,k.jsx)(l.ZP,{item:!0,xs:12,sm:12,md:4,lg:4,xl:4,xxl:4,children:(0,k.jsx)(Z.Z.TableComponents,{children:(0,k.jsx)(d.Z,{stickyHeader:!0,"aria-label":"sticky table",children:(0,k.jsx)(x.Z,{children:O.length>0?O.map((function(e,n){return(0,k.jsxs)(f.Z,{role:"checkbox",tabIndex:-1,className:H&&H._id===e._id?"background-gris_500":"",children:[(0,k.jsxs)(h.Z,{children:[(0,k.jsx)(b.Z,{control:(0,k.jsx)(m.Z,{color:"default",checked:ne(e),onChange:function(n){return function(e,n){if(!H)return alert("No ha selecionado la p\xe1gina");if(H._id!==n._id)return alert("Selecciona la pagina para actualizar");var t=e.target.checked,r=ee(n._id);if(Y(H._id),t){var s=Array.from(T,(function(e){return e._id}));Q((0,a.Z)((0,a.Z)({},K),{},(0,i.Z)({},r,s)))}else Q((0,a.Z)((0,a.Z)({},K),{},(0,i.Z)({},r,[])))}(n,e)}})}),e.NOMBRE_MENU]}),(0,k.jsx)(h.Z,{children:(0,k.jsx)(Z.Z.ButtonIconComponent,{title:"Sub P\xe1ginas",icon:g.W.ARROW_RIGHT,onClick:function(){return W(e)}})})]},n)})):(0,k.jsx)(f.Z,{hover:!0,role:"checkbox",tabIndex:-1,children:(0,k.jsx)(h.Z,{colSpan:4,align:"center",children:"Todav\xeda no se insert\xf3 ningun registro"})})})})})}),(0,k.jsx)(l.ZP,{item:!0,xs:12,sm:12,md:8,lg:8,xl:8,xxl:8,justifyContent:"center",alignItems:"center",children:K&&H?(0,k.jsx)(Z.Z.TableComponents,{children:(0,k.jsx)(d.Z,{stickyHeader:!0,"aria-label":"sticky table",children:(0,k.jsx)(x.Z,{children:T.length>0?T.map((function(e,n){return(0,k.jsx)(f.Z,{hover:!0,role:"checkbox",tabIndex:-1,children:(0,k.jsxs)(h.Z,{children:[(0,k.jsx)(b.Z,{control:(0,k.jsx)(m.Z,{"aria-label":"Checkbox demo",color:"default",checked:te(e),onChange:function(n){return function(e,n){var t=e.target.checked,s=K[ee(H._id)],c=ee(H._id);if(t){var o=K[c]||[];return Q((0,a.Z)((0,a.Z)({},K),{},(0,i.Z)({},c,[].concat((0,r.Z)(o),[n._id]))))}var u=s.filter((function(e){return e!==n._id}));return Q((0,a.Z)((0,a.Z)({},K),{},(0,i.Z)({},c,u)))}(n,e)}})}),e.NOMBRE_SUBMENU]})},n)})):(0,k.jsx)(f.Z,{hover:!0,role:"checkbox",tabIndex:-1,children:(0,k.jsx)(h.Z,{colSpan:4,align:"center",children:"Todav\xeda no se insert\xf3 ningun registro"})})})})}):(0,k.jsx)(o.Z,{sx:(0,a.Z)({display:"flex",justifyContent:"center",alignItems:"center"},e),children:(0,k.jsx)(Z.Z.TextComponent,{variant:"text1",children:"Selecciona una P\xe1gina para comenzar"})})})]}),(0,k.jsx)("br",{}),(0,k.jsxs)(u.Z,{direction:"row",spacing:3,justifyContent:"center",children:[(0,k.jsx)(Z.Z.ButtonComponent,{title:"VOLVER",variant:"secondary-normal",type:"admin",icon:g.W.BACK,onClick:function(){return t(R.v.PERFILES_ADMIN)}}),(0,k.jsx)(Z.Z.ButtonComponent,{title:"Guardar",variant:"primary-normal",type:"admin",icon:g.W.SAVE,onClick:function(){var e=[];for(var r in K)if(K[r]&&0!==K[r].length){var i={ID_SEGURIDAD_PERFILES:V._id,ID_CONFIGURACION_SUBMENU:K[r],ID_CONFIGURACION_MENU:r};e.push(i)}n(!0),(0,j.a)({path:I.D_,body:{PAGINAS_PERFIL:e,ID_PERFIL:V._id},fnRequest:v.b,success:function(e){n(!1),(0,y.V)({message:e.statusText,type:"success",seg:10}),t(R.v.PERFILES_ADMIN)},error:function(e){n(!1),(0,y.V)({message:e.statusText,type:"error",seg:10})}})}})]})]})}}}]);
//# sourceMappingURL=854.91f36e3e.chunk.js.map